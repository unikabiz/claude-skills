# ============================================
# Production Environment Configuration
# Copy to .env.production and fill in actual values
# CRITICAL: Keep this file secure and never commit to git
# ============================================

# Application
ENVIRONMENT=production
VERSION=v1.0.0

# Docker Registry
REGISTRY=ghcr.io
FRONTEND_IMAGE=piano-tutor/frontend
BACKEND_IMAGE=piano-tutor/backend

# Deployment Configuration (Blue-Green)
DEPLOYMENT_COLOR=blue  # or green
FRONTEND_PORT=3000     # 3000 for blue, 3001 for green
BACKEND_PORT=8000      # 8000 for blue, 8001 for green

# Database Configuration
DATABASE_URL=postgresql://piano_tutor:STRONG_PASSWORD_HERE@postgres:5432/piano_tutor
POSTGRES_DB=piano_tutor
POSTGRES_USER=piano_tutor
POSTGRES_PASSWORD=STRONG_PASSWORD_MIN_32_CHARS

# Redis Configuration
REDIS_URL=redis://redis:6379/0

# Authentication & Security
JWT_SECRET=CRITICAL_CHANGE_ME_64_RANDOM_CHARS_MIN
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# API Configuration
CORS_ORIGINS=https://piano-tutor.com,https://www.piano-tutor.com
API_URL=https://api.piano-tutor.com
WS_URL=wss://api.piano-tutor.com

# Celery Configuration
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0
CELERY_WORKER_CONCURRENCY=4
CELERY_TASK_TIME_LIMIT=300
CELERY_TASK_SOFT_TIME_LIMIT=240

# File Upload
MAX_UPLOAD_SIZE=20971520  # 20MB
UPLOAD_DIR=/app/uploads

# Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE=/app/logs/piano-tutor.log

# Monitoring & Error Tracking
SENTRY_DSN=https://YOUR_SENTRY_KEY@sentry.io/YOUR_PROJECT_ID
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Analytics
ANALYTICS_ID=G-XXXXXXXXXX
ENABLE_ANALYTICS=true

# Email Configuration
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASSWORD=YOUR_SENDGRID_API_KEY
SMTP_FROM=noreply@piano-tutor.com
SMTP_FROM_NAME=Piano Tutor

# AWS/Cloud Configuration
AWS_ACCESS_KEY_ID=YOUR_AWS_KEY
AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET
AWS_REGION=us-east-1
S3_BUCKET=piano-tutor-production
CLOUDFRONT_DOMAIN=cdn.piano-tutor.com

# CDN Configuration
CDN_URL=https://cdn.piano-tutor.com
STATIC_URL=https://static.piano-tutor.com

# Database Backup
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=piano-tutor-backups

# SSL/TLS
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# Feature Flags
ENABLE_REGISTRATION=true
ENABLE_OAUTH=true
ENABLE_OAUTH_GOOGLE=true
ENABLE_OAUTH_GITHUB=false
ENABLE_ANALYTICS=true
ENABLE_DEBUG_MODE=false
ENABLE_MAINTENANCE_MODE=false

# Performance
CACHE_TTL=3600
SESSION_TIMEOUT=1800
CONNECTION_POOL_SIZE=20

# Security
ALLOWED_HOSTS=piano-tutor.com,www.piano-tutor.com,api.piano-tutor.com
SECURE_SSL_REDIRECT=true
SESSION_COOKIE_SECURE=true
CSRF_COOKIE_SECURE=true
X_FRAME_OPTIONS=DENY

# Third-party Integrations (Optional)
STRIPE_API_KEY=
STRIPE_WEBHOOK_SECRET=
MIXPANEL_TOKEN=
INTERCOM_APP_ID=
