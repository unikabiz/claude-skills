graph TB
    subgraph User["ğŸ‘¤ ç”¨æˆ·å±‚"]
        UserQuery[ç”¨æˆ·æŸ¥è¯¢]
    end

    subgraph LangGraph["ğŸ”„ LangGraph çŠ¶æ€å›¾å±‚"]
        Discover[å‘ç°æŠ€èƒ½<br/>discover_skills]
        Select[é€‰æ‹©æŠ€èƒ½<br/>select_skill]
        Load[åŠ è½½æŠ€èƒ½<br/>load_skill]
        Analyze[åˆ†ææ„å›¾<br/>analyze_intent]
        Generate[ç”Ÿæˆä»£ç <br/>generate_code]
        Execute[æ‰§è¡Œä»£ç <br/>execute_code]
        HandleError[å¤„ç†é”™è¯¯<br/>handle_error]
        Finalize[å®Œæˆä»»åŠ¡<br/>finalize]
    end

    subgraph Management["ğŸ“¦ æŠ€èƒ½ç®¡ç†å±‚"]
        Discovery[SkillDiscovery<br/>â€¢ æ‰«æç›®å½•<br/>â€¢ è§£æå…ƒæ•°æ®<br/>â€¢ æ„å»ºç´¢å¼•]
        Loader[SkillLoader<br/>â€¢ æŒ‰éœ€åŠ è½½<br/>â€¢ ç¼“å­˜ç®¡ç†<br/>â€¢ ä¸Šä¸‹æ–‡æ ¼å¼åŒ–]
    end

    subgraph LLM["ğŸ¤– LLM æ¨ç†å±‚"]
        DeepSeek[DeepSeekLLM<br/>â€¢ æŠ€èƒ½é€‰æ‹©<br/>â€¢ æ„å›¾ç†è§£<br/>â€¢ ä»£ç ç”Ÿæˆ<br/>â€¢ å·¥ä½œæµè§„åˆ’]
    end

    subgraph Skills["ğŸ’¾ Skills ä»“åº“å±‚"]
        PDF[pdf/<br/>â€¢ SKILL.md<br/>â€¢ scripts/<br/>â€¢ references/]
        GIF[slack-gif-creator/<br/>â€¢ SKILL.md<br/>â€¢ core/<br/>â€¢ templates/]
        DOCX[docx/<br/>â€¢ SKILL.md<br/>â€¢ scripts/]
        More[æ›´å¤šæŠ€èƒ½...]
    end

    %% ä¸»è¦æµç¨‹
    UserQuery --> Discover
    Discover --> Select
    Select -->|æ‰¾åˆ°æŠ€èƒ½| Load
    Select -->|æœªæ‰¾åˆ°| Finalize
    Load --> Analyze
    Analyze --> Generate
    Generate --> Execute
    Execute -->|æˆåŠŸ| Finalize
    Execute -->|å¤±è´¥| HandleError
    HandleError --> Finalize

    %% ç»„ä»¶äº¤äº’
    Discover -.-> Discovery
    Select -.-> DeepSeek
    Load -.-> Loader
    Analyze -.-> DeepSeek
    Generate -.-> DeepSeek
    
    Discovery -.-> Skills
    Loader -.-> Skills

    %% æ ·å¼
    classDef userClass fill:#e1f5ff,stroke:#01579b,stroke-width:2px
    classDef graphClass fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef managementClass fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef llmClass fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px
    classDef skillClass fill:#fff9c4,stroke:#f57f17,stroke-width:2px

    class UserQuery userClass
    class Discover,Select,Load,Analyze,Generate,Execute,HandleError,Finalize graphClass
    class Discovery,Loader managementClass
    class DeepSeek llmClass
    class PDF,GIF,DOCX,More skillClass
```

## æ•°æ®æµå›¾

```mermaid
sequenceDiagram
    participant User as ğŸ‘¤ ç”¨æˆ·
    participant Agent as ğŸ”„ SkillAgent
    participant Discovery as ğŸ“¦ SkillDiscovery
    participant Loader as ğŸ“¦ SkillLoader
    participant LLM as ğŸ¤– DeepSeekLLM
    participant Skills as ğŸ’¾ Skillsä»“åº“

    User->>Agent: å‘é€æŸ¥è¯¢
    Agent->>Discovery: å‘ç°æŠ€èƒ½
    Discovery->>Skills: æ‰«æç›®å½•
    Skills-->>Discovery: è¿”å›æŠ€èƒ½åˆ—è¡¨
    Discovery-->>Agent: æŠ€èƒ½ç´¢å¼•
    
    Agent->>LLM: é€‰æ‹©æŠ€èƒ½(æŸ¥è¯¢+æŠ€èƒ½åˆ—è¡¨)
    LLM-->>Agent: é€‰ä¸­çš„æŠ€èƒ½åç§°
    
    Agent->>Loader: åŠ è½½æŠ€èƒ½å†…å®¹
    Loader->>Skills: è¯»å– SKILL.md
    Skills-->>Loader: æŠ€èƒ½å†…å®¹
    Loader-->>Agent: å®Œæ•´æŠ€èƒ½å†…å®¹
    
    Agent->>LLM: åˆ†ææ„å›¾(æŸ¥è¯¢+æŠ€èƒ½ä¸Šä¸‹æ–‡)
    LLM-->>Agent: æ„å›¾åˆ†æç»“æœ
    
    opt éœ€è¦å‚è€ƒæ–‡æ¡£
        Agent->>Loader: åŠ è½½å‚è€ƒæ–‡æ¡£
        Loader->>Skills: è¯»å– references/
        Skills-->>Loader: æ–‡æ¡£å†…å®¹
        Loader-->>Agent: å‚è€ƒæ–‡æ¡£
    end
    
    Agent->>LLM: ç”Ÿæˆä»£ç (ä»»åŠ¡+å®Œæ•´ä¸Šä¸‹æ–‡)
    LLM-->>Agent: ç”Ÿæˆçš„ä»£ç 
    
    Agent->>Agent: æ‰§è¡Œä»£ç 
    
    alt æ‰§è¡ŒæˆåŠŸ
        Agent-->>User: è¿”å›ç»“æœ
    else æ‰§è¡Œå¤±è´¥
        Agent->>Agent: é”™è¯¯å¤„ç†
        Agent-->>User: é”™è¯¯ä¿¡æ¯
    end
```

## æŠ€èƒ½åŠ è½½æµç¨‹

```mermaid
flowchart TD
    Start([å¼€å§‹]) --> CheckCache{æ£€æŸ¥ç¼“å­˜}
    CheckCache -->|å­˜åœ¨| ReturnCache[è¿”å›ç¼“å­˜å†…å®¹]
    CheckCache -->|ä¸å­˜åœ¨| ParseYAML[è§£æ YAML frontmatter]
    
    ParseYAML --> ReadMarkdown[è¯»å– Markdown æ­£æ–‡]
    ReadMarkdown --> CheckScripts{æœ‰ scripts/?}
    
    CheckScripts -->|æ˜¯| IndexScripts[ç´¢å¼•è„šæœ¬æ–‡ä»¶]
    CheckScripts -->|å¦| CheckRefs{æœ‰ references/?}
    IndexScripts --> CheckRefs
    
    CheckRefs -->|æ˜¯| IndexRefs[ç´¢å¼•å‚è€ƒæ–‡æ¡£]
    CheckRefs -->|å¦| CheckAssets{æœ‰ assets/?}
    IndexRefs --> CheckAssets
    
    CheckAssets -->|æ˜¯| IndexAssets[ç´¢å¼•èµ„æºæ–‡ä»¶]
    CheckAssets -->|å¦| CreateContent[åˆ›å»º SkillContent]
    IndexAssets --> CreateContent
    
    CreateContent --> SaveCache[ä¿å­˜åˆ°ç¼“å­˜]
    SaveCache --> ReturnCache
    ReturnCache --> End([ç»“æŸ])
```

## çŠ¶æ€è½¬æ¢è¯¦å›¾

```mermaid
stateDiagram-v2
    [*] --> DiscoverSkills: ç”¨æˆ·æŸ¥è¯¢
    
    DiscoverSkills --> SelectSkill: æŠ€èƒ½å·²å‘ç°
    
    SelectSkill --> LoadSkill: æ‰¾åˆ°åˆé€‚æŠ€èƒ½
    SelectSkill --> Finalize: æœªæ‰¾åˆ°æŠ€èƒ½
    
    LoadSkill --> AnalyzeIntent: æŠ€èƒ½å·²åŠ è½½
    
    AnalyzeIntent --> GenerateCode: æ„å›¾å·²åˆ†æ
    
    GenerateCode --> ExecuteCode: ä»£ç å·²ç”Ÿæˆ
    
    ExecuteCode --> Finalize: æ‰§è¡ŒæˆåŠŸ
    ExecuteCode --> HandleError: æ‰§è¡Œå¤±è´¥
    
    HandleError --> GenerateCode: é‡è¯•
    HandleError --> Finalize: æ”¾å¼ƒ
    
    Finalize --> [*]: ä»»åŠ¡å®Œæˆ
    
    note right of DiscoverSkills
        æ‰«æ Skills ä»“åº“
        æ„å»ºæŠ€èƒ½ç´¢å¼•
    end note
    
    note right of SelectSkill
        DeepSeek åˆ†ææŸ¥è¯¢
        åŒ¹é…æœ€åˆé€‚æŠ€èƒ½
    end note
    
    note right of LoadSkill
        åŠ è½½ SKILL.md
        ç´¢å¼• scripts/references/assets
    end note
    
    note right of AnalyzeIntent
        ç†è§£å…·ä½“éœ€æ±‚
        æå–å‚æ•°
        ç¡®å®šæ­¥éª¤
    end note
    
    note right of GenerateCode
        åŸºäºæŠ€èƒ½ä¸Šä¸‹æ–‡
        ç”Ÿæˆè§£å†³æ–¹æ¡ˆä»£ç 
    end note
    
    note right of ExecuteCode
        æ²™ç®±ç¯å¢ƒæ‰§è¡Œ
        æ•è·è¾“å‡º/é”™è¯¯
    end note